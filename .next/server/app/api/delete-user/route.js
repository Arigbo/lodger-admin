"use strict";(()=>{var e={};e.id=429,e.ids=[429],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},496:(e,r,t)=>{t.r(r),t.d(r,{originalPathname:()=>I,patchFetch:()=>g,requestAsyncStorage:()=>f,routeModule:()=>E,serverHooks:()=>h,staticGenerationAsyncStorage:()=>v});var s={};t.r(s),t.d(s,{POST:()=>m});var o=t(9303),n=t(8716),i=t(670),a=t(7070);let u=require("firebase-admin"),l={projectId:process.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID,clientEmail:process.env.FIREBASE_CLIENT_EMAIL,privateKey:process.env.FIREBASE_PRIVATE_KEY?.replace(/\\n/g,"\n")};function c(){if(!u.apps.length){if(!l.projectId||!l.clientEmail||!l.privateKey)return console.warn("Firebase Admin credentials not found. Initialization skipped."),null;u.initializeApp({credential:u.credential.cert({project_id:l.projectId,client_email:l.clientEmail,private_key:l.privateKey})})}return u}let d=c()?.auth(),p=c()?.firestore();async function m(e){try{let{userId:r}=await e.json();if(!r)return a.NextResponse.json({success:!1,error:"User ID is required"},{status:400});if(console.log(`--- SECURE USER DELETION TRIGGERED: ${r} ---`),!d||!p)return console.error("Firebase Admin not initialized. Check environment variables."),a.NextResponse.json({success:!1,error:"Internal Server Error: Database not available"},{status:500});try{await d.deleteUser(r),console.log(`Successfully deleted user ${r} from Firebase Auth`)}catch(e){if("auth/user-not-found"!==e.code)throw console.error("Error deleting from Auth:",e),e}return await p.collection("users").doc(r).delete(),console.log(`Successfully deleted user ${r} document from Firestore`),a.NextResponse.json({success:!0,message:"User deleted from Auth and Firestore"})}catch(e){return console.error("Secure Deletion API Error:",e),a.NextResponse.json({success:!1,error:e.message},{status:500})}}let E=new o.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/delete-user/route",pathname:"/api/delete-user",filename:"route",bundlePath:"app/api/delete-user/route"},resolvedPagePath:"C:\\Users\\HP\\Desktop\\lodger-admin\\src\\app\\api\\delete-user\\route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:f,staticGenerationAsyncStorage:v,serverHooks:h}=E,I="/api/delete-user/route";function g(){return(0,i.patchFetch)({serverHooks:h,staticGenerationAsyncStorage:v})}}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[948,972],()=>t(496));module.exports=s})();