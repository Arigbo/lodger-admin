(()=>{var e={};e.id=158,e.ids=[158],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},3122:e=>{"use strict";e.exports=require("undici")},6113:e=>{"use strict";e.exports=require("crypto")},9523:e=>{"use strict";e.exports=require("dns")},2361:e=>{"use strict";e.exports=require("events")},7147:e=>{"use strict";e.exports=require("fs")},3685:e=>{"use strict";e.exports=require("http")},5158:e=>{"use strict";e.exports=require("http2")},1808:e=>{"use strict";e.exports=require("net")},2037:e=>{"use strict";e.exports=require("os")},1017:e=>{"use strict";e.exports=require("path")},7282:e=>{"use strict";e.exports=require("process")},2781:e=>{"use strict";e.exports=require("stream")},4404:e=>{"use strict";e.exports=require("tls")},7310:e=>{"use strict";e.exports=require("url")},3837:e=>{"use strict";e.exports=require("util")},9796:e=>{"use strict";e.exports=require("zlib")},420:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>c.a,__next_app__:()=>x,originalPathname:()=>p,pages:()=>d,routeModule:()=>u,tree:()=>o}),r(8360),r(7555),r(5866);var s=r(3191),a=r(8716),i=r(7922),c=r.n(i),l=r(5231),n={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>l[e]);r.d(t,n);let o=["",{children:["broadcast",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,8360)),"C:\\Users\\HP\\Desktop\\lodger-admin\\src\\app\\broadcast\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,7555)),"C:\\Users\\HP\\Desktop\\lodger-admin\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,5866,23)),"next/dist/client/components/not-found-error"]}],d=["C:\\Users\\HP\\Desktop\\lodger-admin\\src\\app\\broadcast\\page.tsx"],p="/broadcast/page",x={require:r,loadChunk:()=>Promise.resolve()},u=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/broadcast/page",pathname:"/broadcast",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},895:(e,t,r)=>{Promise.resolve().then(r.bind(r,7038))},6307:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(2881).Z)("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},5932:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(2881).Z)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},7038:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>j});var s=r(326),a=r(7577),i=r(4061),c=r(763),l=r(2881);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,l.Z)("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);var o=r(1291),d=r(5932),p=r(9436),x=r(6307);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let u=(0,l.Z)("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),h=(0,l.Z)("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),m=(0,l.Z)("PanelsTopLeft",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]]);var g=r(1223),b=r(8522),y=r(76),f=r(6791);let w=[{id:"all",name:"Everyone",icon:i.Z},{id:"landlords",name:"Landlords Only",icon:c.Z},{id:"students",name:"Students Only",icon:n},{id:"no-stripe",name:"Incomplete Stripe",icon:o.Z}];function j(){let[e,t]=(0,a.useState)(""),[r,i]=(0,a.useState)(""),[c,l]=(0,a.useState)("all"),[n,o]=(0,a.useState)("info"),[j,k]=(0,a.useState)(!1),[v,N]=(0,a.useState)(!1),[q,P]=(0,a.useState)(null),[S,C]=(0,a.useState)(0),_=async s=>{if(s.preventDefault(),e&&r){k(!0);try{let s=b.I8.currentUser;if(!s){console.error("No authenticated user found for broadcast."),P("error");return}let a=await (0,f.wU)(s,!0),l=await fetch("https://lodger-ancient.vercel.app/api/broadcast",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`},body:JSON.stringify({title:e,message:r,target:c,type:n,sendEmail:v})});if(!l.ok){let e=await l.json();throw console.error("[Broadcast] API Error Response:",{status:l.status,statusText:l.statusText,errorData:e}),Error(e.error||"Failed to dispatch broadcast")}let o=await l.json();C(o.count||0),await (0,y.ET)((0,y.hJ)(b.db,"broadcastMessages"),{title:e,message:r,target:c,type:n,sendEmail:v,recipients:o.count||0,timestamp:(0,y.Bt)(),sentBy:"Admin Console"}),P("success"),t(""),i(""),setTimeout(()=>P(null),5e3)}catch(e){console.error("Error sending broadcast:",e),P("error")}finally{k(!1)}}};return(0,s.jsxs)("div",{className:"space-y-10",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("h2",{className:"text-4xl font-black uppercase tracking-tighter",children:["Targeted ",s.jsx("span",{className:"text-primary italic",children:"Broadcast"})]}),s.jsx("p",{className:"text-white/40 font-bold uppercase tracking-widest text-xs mt-2",children:"Send intelligent notifications based on system data"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-10",children:[s.jsx("div",{className:"lg:col-span-2",children:(0,s.jsxs)("form",{onSubmit:_,className:"p-10 rounded-[2.5rem] bg-white/5 border border-white/5 space-y-8 relative overflow-hidden",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-white/40 pl-1",children:"Broadcast Title"}),s.jsx("input",{type:"text",placeholder:"E.g. System Update or Policy Change",className:"w-full h-14 bg-white/5 border border-white/10 rounded-2xl px-6 text-base font-bold text-white focus:outline-none focus:ring-1 focus:ring-primary focus:border-transparent transition-all",value:e,onChange:e=>t(e.target.value),required:!0})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-white/40 pl-1",children:"Message Payload"}),s.jsx("textarea",{placeholder:"Describe the notification content specifically...",className:"w-full min-h-[200px] bg-white/5 border border-white/10 rounded-2xl p-6 text-base font-medium text-white/80 focus:outline-none focus:ring-1 focus:ring-primary focus:border-transparent transition-all resize-none leading-relaxed",value:r,onChange:e=>i(e.target.value),required:!0})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[(0,s.jsxs)("div",{className:"space-y-4",children:[s.jsx("label",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-white/40 pl-1",children:"Broadcast Velocity"}),s.jsx("div",{className:"flex gap-2",children:["info","warning","urgent"].map(e=>s.jsx("button",{type:"button",onClick:()=>o(e),className:(0,g.cn)("flex-1 py-3 rounded-xl border font-black uppercase tracking-widest text-[10px] transition-all",n===e?"bg-primary border-primary text-black":"bg-white/5 border-white/10 text-white/40 hover:text-white"),children:e},e))})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[s.jsx("label",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-white/40 pl-1",children:"Delivery Protocol"}),(0,s.jsxs)("button",{type:"button",onClick:()=>N(!v),className:(0,g.cn)("w-full h-14 rounded-xl border font-black uppercase tracking-widest text-[10px] transition-all flex items-center justify-center gap-3",v?"bg-white text-black border-white":"bg-white/5 border-white/10 text-white/40 hover:text-white"),children:[s.jsx(d.Z,{className:(0,g.cn)("h-4 w-4",v?"text-black":"text-white/20")}),v?"Email Enabled":"In-App Only"]})]})]}),s.jsx("div",{className:"pt-4",children:s.jsx("button",{type:"submit",disabled:j,className:"w-full h-20 rounded-2xl bg-primary text-black font-black uppercase tracking-widest text-base shadow-xl shadow-primary/20 hover:scale-[1.01] active:scale-[0.99] transition-all flex items-center justify-center gap-4 disabled:opacity-50",children:j?(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"w-6 h-6 border-3 border-black/30 border-t-black rounded-full animate-spin"}),s.jsx("span",{children:"Dispatching Signal..."})]}):(0,s.jsxs)(s.Fragment,{children:[s.jsx(p.Z,{className:"h-5 w-5"}),"Dispatch to ","all"===c?"Entire Grid":c]})})}),"success"===q&&(0,s.jsxs)("div",{className:"absolute inset-0 bg-primary flex flex-col items-center justify-center animate-in fade-in zoom-in duration-300 z-50",children:[s.jsx("div",{className:"w-20 h-20 rounded-full bg-black/10 flex items-center justify-center mb-6",children:s.jsx(x.Z,{className:"h-10 w-10 text-black"})}),s.jsx("h3",{className:"text-2xl font-black uppercase text-black tracking-tighter",children:"Broadcast Dispatched"}),(0,s.jsxs)("p",{className:"text-black/60 font-bold uppercase tracking-widest text-[10px] mt-2",children:["Reached ",S," nodes across the tactical grid"]})]})]})}),(0,s.jsxs)("div",{className:"space-y-8",children:[(0,s.jsxs)("div",{className:"p-8 rounded-[2.5rem] bg-[#0A0A0A] border border-white/5 space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[s.jsx(u,{className:"h-5 w-5 text-primary"}),(0,s.jsxs)("h4",{className:"text-lg font-black uppercase tracking-tighter",children:["Recipients ",s.jsx("span",{className:"text-primary italic",children:"Filter"})]})]}),s.jsx("div",{className:"space-y-2",children:w.map(e=>(0,s.jsxs)("button",{onClick:()=>l(e.id),className:(0,g.cn)("w-full flex items-center gap-4 px-5 py-4 rounded-2xl border transition-all text-left group",c===e.id?"bg-primary/10 border-primary text-white":"bg-white/5 border-transparent text-white/40 hover:text-white hover:bg-white/10"),children:[s.jsx(e.icon,{className:(0,g.cn)("h-5 w-5 transition-transform group-hover:scale-110",c===e.id?"text-primary":"text-white/20")}),s.jsx("span",{className:"font-bold text-sm tracking-tight",children:e.name}),c===e.id&&s.jsx("div",{className:"ml-auto w-2 h-2 rounded-full bg-primary"})]},e.id))})]}),(0,s.jsxs)("div",{className:"p-8 rounded-[2.5rem] bg-white/5 border border-white/5 relative overflow-hidden group",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4 mb-4",children:[s.jsx("div",{className:"p-3 rounded-xl bg-primary/10 border border-primary/20",children:s.jsx(h,{className:"h-5 w-5 text-primary"})}),(0,s.jsxs)("h5",{className:"font-black uppercase tracking-tighter",children:["Targeting ",s.jsx("span",{className:"text-primary italic",children:"IQ"})]})]}),s.jsx("p",{className:"text-sm text-white/40 leading-relaxed font-bold italic tracking-tight",children:"\"Selecting 'Students' will automatically include those with active tenancies and those currently searching.\""})]}),(0,s.jsxs)("div",{className:"aspect-square rounded-[2.5rem] bg-white/5 border border-white/5 p-8 flex flex-col justify-between italic",children:[s.jsx(m,{className:"h-10 w-10 text-white/10"}),(0,s.jsxs)("div",{children:[s.jsx("p",{className:"text-2xl font-black uppercase tracking-tighter text-white/10",children:"Broadcast Archive"}),s.jsx("p",{className:"text-[10px] font-black uppercase tracking-widest text-white/10 mt-2",children:"Historical Logs locked"})]})]})]})]})]})}},8360:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$typeof:()=>c,__esModule:()=>i,default:()=>l});var s=r(8570);let a=(0,s.createProxy)(String.raw`C:\Users\HP\Desktop\lodger-admin\src\app\broadcast\page.tsx`),{__esModule:i,$$typeof:c}=a;a.default;let l=(0,s.createProxy)(String.raw`C:\Users\HP\Desktop\lodger-admin\src\app\broadcast\page.tsx#default`)}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[948,795,178],()=>r(420));module.exports=s})();