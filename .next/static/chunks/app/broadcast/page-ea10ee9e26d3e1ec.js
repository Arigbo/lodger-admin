(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[158],{5945:function(e,t,a){Promise.resolve().then(a.bind(a,9376))},6780:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,a(8030).Z)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},3231:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,a(8030).Z)("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},4086:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,a(8030).Z)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},994:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,a(8030).Z)("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]])},6141:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,a(8030).Z)("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},1240:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,a(8030).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},9376:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return w}});var r=a(7437),s=a(2265),i=a(1240),c=a(6141),n=a(8030);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,n.Z)("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);var d=a(6780),o=a(4086),h=a(994),p=a(3231);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let u=(0,n.Z)("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),x=(0,n.Z)("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),m=(0,n.Z)("PanelsTopLeft",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]]);var b=a(9354),f=a(4544),g=a(9842),y=a(5735);let k=[{id:"all",name:"Everyone",icon:i.Z},{id:"landlords",name:"Landlords Only",icon:c.Z},{id:"students",name:"Students Only",icon:l},{id:"no-stripe",name:"Incomplete Stripe",icon:d.Z}];function w(){let[e,t]=(0,s.useState)(""),[a,i]=(0,s.useState)(""),[c,n]=(0,s.useState)("all"),[l,d]=(0,s.useState)("info"),[w,j]=(0,s.useState)(!1),[v,N]=(0,s.useState)(!1),[S,Z]=(0,s.useState)(null),[C,M]=(0,s.useState)(0),I=async r=>{if(r.preventDefault(),e&&a){j(!0);try{let r=f.I8.currentUser;if(!r){console.error("No authenticated user found for broadcast."),Z("error");return}let s=await (0,y.wU)(r,!0),n=await fetch("".concat("https://lodger-ancient.vercel.app","/api/broadcast"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)},body:JSON.stringify({title:e,message:a,target:c,type:l,sendEmail:v})});if(!n.ok){let e=await n.json();throw console.error("[Broadcast] API Error Response:",{status:n.status,statusText:n.statusText,errorData:e}),Error(e.error||"Failed to dispatch broadcast")}let d=await n.json();M(d.count||0),await (0,g.ET)((0,g.hJ)(f.db,"broadcastMessages"),{title:e,message:a,target:c,type:l,sendEmail:v,recipients:d.count||0,timestamp:(0,g.Bt)(),sentBy:"Admin Console"}),Z("success"),t(""),i(""),setTimeout(()=>Z(null),5e3)}catch(e){console.error("Error sending broadcast:",e),Z("error")}finally{j(!1)}}};return(0,r.jsxs)("div",{className:"space-y-10",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("h2",{className:"text-4xl font-black uppercase tracking-tighter",children:["Targeted ",(0,r.jsx)("span",{className:"text-primary italic",children:"Broadcast"})]}),(0,r.jsx)("p",{className:"text-white/40 font-bold uppercase tracking-widest text-xs mt-2",children:"Send intelligent notifications based on system data"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-10",children:[(0,r.jsx)("div",{className:"lg:col-span-2",children:(0,r.jsxs)("form",{onSubmit:I,className:"p-10 rounded-[2.5rem] bg-white/5 border border-white/5 space-y-8 relative overflow-hidden",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-white/40 pl-1",children:"Broadcast Title"}),(0,r.jsx)("input",{type:"text",placeholder:"E.g. System Update or Policy Change",className:"w-full h-14 bg-white/5 border border-white/10 rounded-2xl px-6 text-base font-bold text-white focus:outline-none focus:ring-1 focus:ring-primary focus:border-transparent transition-all",value:e,onChange:e=>t(e.target.value),required:!0})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-white/40 pl-1",children:"Message Payload"}),(0,r.jsx)("textarea",{placeholder:"Describe the notification content specifically...",className:"w-full min-h-[200px] bg-white/5 border border-white/10 rounded-2xl p-6 text-base font-medium text-white/80 focus:outline-none focus:ring-1 focus:ring-primary focus:border-transparent transition-all resize-none leading-relaxed",value:a,onChange:e=>i(e.target.value),required:!0})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("label",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-white/40 pl-1",children:"Broadcast Velocity"}),(0,r.jsx)("div",{className:"flex gap-2",children:["info","warning","urgent"].map(e=>(0,r.jsx)("button",{type:"button",onClick:()=>d(e),className:(0,b.cn)("flex-1 py-3 rounded-xl border font-black uppercase tracking-widest text-[10px] transition-all",l===e?"bg-primary border-primary text-black":"bg-white/5 border-white/10 text-white/40 hover:text-white"),children:e},e))})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("label",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-white/40 pl-1",children:"Delivery Protocol"}),(0,r.jsxs)("button",{type:"button",onClick:()=>N(!v),className:(0,b.cn)("w-full h-14 rounded-xl border font-black uppercase tracking-widest text-[10px] transition-all flex items-center justify-center gap-3",v?"bg-white text-black border-white":"bg-white/5 border-white/10 text-white/40 hover:text-white"),children:[(0,r.jsx)(o.Z,{className:(0,b.cn)("h-4 w-4",v?"text-black":"text-white/20")}),v?"Email Enabled":"In-App Only"]})]})]}),(0,r.jsx)("div",{className:"pt-4",children:(0,r.jsx)("button",{type:"submit",disabled:w,className:"w-full h-20 rounded-2xl bg-primary text-black font-black uppercase tracking-widest text-base shadow-xl shadow-primary/20 hover:scale-[1.01] active:scale-[0.99] transition-all flex items-center justify-center gap-4 disabled:opacity-50",children:w?(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)("div",{className:"w-6 h-6 border-3 border-black/30 border-t-black rounded-full animate-spin"}),(0,r.jsx)("span",{children:"Dispatching Signal..."})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(h.Z,{className:"h-5 w-5"}),"Dispatch to ","all"===c?"Entire Grid":c]})})}),"success"===S&&(0,r.jsxs)("div",{className:"absolute inset-0 bg-primary flex flex-col items-center justify-center animate-in fade-in zoom-in duration-300 z-50",children:[(0,r.jsx)("div",{className:"w-20 h-20 rounded-full bg-black/10 flex items-center justify-center mb-6",children:(0,r.jsx)(p.Z,{className:"h-10 w-10 text-black"})}),(0,r.jsx)("h3",{className:"text-2xl font-black uppercase text-black tracking-tighter",children:"Broadcast Dispatched"}),(0,r.jsxs)("p",{className:"text-black/60 font-bold uppercase tracking-widest text-[10px] mt-2",children:["Reached ",C," nodes across the tactical grid"]})]})]})}),(0,r.jsxs)("div",{className:"space-y-8",children:[(0,r.jsxs)("div",{className:"p-8 rounded-[2.5rem] bg-[#0A0A0A] border border-white/5 space-y-6",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,r.jsx)(u,{className:"h-5 w-5 text-primary"}),(0,r.jsxs)("h4",{className:"text-lg font-black uppercase tracking-tighter",children:["Recipients ",(0,r.jsx)("span",{className:"text-primary italic",children:"Filter"})]})]}),(0,r.jsx)("div",{className:"space-y-2",children:k.map(e=>(0,r.jsxs)("button",{onClick:()=>n(e.id),className:(0,b.cn)("w-full flex items-center gap-4 px-5 py-4 rounded-2xl border transition-all text-left group",c===e.id?"bg-primary/10 border-primary text-white":"bg-white/5 border-transparent text-white/40 hover:text-white hover:bg-white/10"),children:[(0,r.jsx)(e.icon,{className:(0,b.cn)("h-5 w-5 transition-transform group-hover:scale-110",c===e.id?"text-primary":"text-white/20")}),(0,r.jsx)("span",{className:"font-bold text-sm tracking-tight",children:e.name}),c===e.id&&(0,r.jsx)("div",{className:"ml-auto w-2 h-2 rounded-full bg-primary"})]},e.id))})]}),(0,r.jsxs)("div",{className:"p-8 rounded-[2.5rem] bg-white/5 border border-white/5 relative overflow-hidden group",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4 mb-4",children:[(0,r.jsx)("div",{className:"p-3 rounded-xl bg-primary/10 border border-primary/20",children:(0,r.jsx)(x,{className:"h-5 w-5 text-primary"})}),(0,r.jsxs)("h5",{className:"font-black uppercase tracking-tighter",children:["Targeting ",(0,r.jsx)("span",{className:"text-primary italic",children:"IQ"})]})]}),(0,r.jsx)("p",{className:"text-sm text-white/40 leading-relaxed font-bold italic tracking-tight",children:"\"Selecting 'Students' will automatically include those with active tenancies and those currently searching.\""})]}),(0,r.jsxs)("div",{className:"aspect-square rounded-[2.5rem] bg-white/5 border border-white/5 p-8 flex flex-col justify-between italic",children:[(0,r.jsx)(m,{className:"h-10 w-10 text-white/10"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-2xl font-black uppercase tracking-tighter text-white/10",children:"Broadcast Archive"}),(0,r.jsx)("p",{className:"text-[10px] font-black uppercase tracking-widest text-white/10 mt-2",children:"Historical Logs locked"})]})]})]})]})]})}},4544:function(e,t,a){"use strict";a.d(t,{I8:function(){return l},db:function(){return d},Vv:function(){return o}});var r=a(5236),s=a(5735),i=a(9842),c=a(9854);let n=0===(0,r.C6)().length?(0,r.ZF)({projectId:"studio-2267792175-c3d0d",appId:"1:300603419642:web:45d0d0f2168c0180e41243",storageBucket:"studio-2267792175-c3d0d.firebasestorage.app",apiKey:"AIzaSyCO-2ySCn-hSI606tvGfXrF8Jhxxcv5glk",authDomain:"studio-2267792175-c3d0d.firebaseapp.com",measurementId:"",messagingSenderId:"300603419642"}):(0,r.Mq)(),l=(0,s.v0)(n),d=(0,i.ad)(n);(0,c.cF)(n);let o=new s.hJ},9354:function(e,t,a){"use strict";a.d(t,{cn:function(){return i}});var r=a(4839),s=a(6164);function i(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,s.m6)((0,r.W)(t))}}},function(e){e.O(0,[358,139,430,868,971,23,744],function(){return e(e.s=5945)}),_N_E=e.O()}]);